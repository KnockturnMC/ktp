From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Bjarne Koll <git@lynxplay.dev>
Date: Mon, 23 Jun 2025 14:51:56 +0200
Subject: [PATCH] Use alternative registry access if level null


diff --git a/net/minecraft/world/level/block/entity/JukeboxBlockEntity.java b/net/minecraft/world/level/block/entity/JukeboxBlockEntity.java
index edbd81272bc9acac5efb5847baad6536cef9dee0..c0da255785ba658dbee90245d9ab48b909859b8b 100644
--- a/net/minecraft/world/level/block/entity/JukeboxBlockEntity.java
+++ b/net/minecraft/world/level/block/entity/JukeboxBlockEntity.java
@@ -152,7 +152,7 @@ public class JukeboxBlockEntity extends BlockEntity implements ContainerSingleIt
     public void setTheItem(ItemStack item) {
         this.item = item;
         boolean flag = !this.item.isEmpty();
-        Optional<Holder<JukeboxSong>> optional = JukeboxSong.fromStack(this.level.registryAccess(), this.item);
+        Optional<Holder<JukeboxSong>> optional = JukeboxSong.fromStack(this.level != null ? this.level.registryAccess() : org.bukkit.craftbukkit.CraftRegistry.getMinecraftRegistry(), this.item); // Paper - fallback to other RegistryAccess if no level
         this.notifyItemChangedInJukebox(flag);
         if (flag && optional.isPresent()) {
             this.jukeboxSongPlayer.play(this.level, optional.get());
