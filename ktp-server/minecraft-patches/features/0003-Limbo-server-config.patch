From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Bjarne Koll <git@lynxplay.dev>
Date: Tue, 20 May 2025 01:41:09 +0200
Subject: [PATCH] Limbo server config

The void server should not be sending *any* packets outside of the login
packet to not confuse the client when quickly switching.

diff --git a/net/minecraft/server/players/PlayerList.java b/net/minecraft/server/players/PlayerList.java
index 9d7be1695f797c2c041d21a8326aeea46b0488d7..ac24c923beb1f3d4b2de75bec67e6eaa8b143380 100644
--- a/net/minecraft/server/players/PlayerList.java
+++ b/net/minecraft/server/players/PlayerList.java
@@ -184,6 +184,7 @@ public abstract class PlayerList {
                 this.server.enforceSecureProfile()
             )
         );
+        if (io.papermc.paper.configuration.GlobalConfiguration.get().unsupportedSettings.limboServer) return; // KTP - limbo server
         player.getBukkitEntity().sendSupportedChannels(); // CraftBukkit
         serverGamePacketListenerImpl.send(new ClientboundChangeDifficultyPacket(levelData.getDifficulty(), levelData.isDifficultyLocked()));
         serverGamePacketListenerImpl.send(new ClientboundPlayerAbilitiesPacket(player.getAbilities()));
