From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Jatyn Stacy <jlee0964@gmail.com>
Date: Thu, 22 May 2025 17:20:03 -0400
Subject: [PATCH] Add faked player spectate target change method


diff --git a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
index 5044718cee3858f6d95c508f339f7993881e125b..ebf214d20ecedf259017b0ff1f1dab4263ed0924 100644
--- a/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
+++ b/src/main/java/org/bukkit/craftbukkit/entity/CraftPlayer.java
@@ -1208,6 +1208,17 @@ public class CraftPlayer extends CraftHumanEntity implements Player {
         this.getHandle().connection.send(new ClientboundRemoveMobEffectPacket(entity.getEntityId(), CraftPotionEffectType.bukkitToMinecraftHolder(type)));
     }
 
+    @Override
+    public void sendSpectateTargetChange(org.bukkit.entity.@Nullable Entity target) {
+        if (this.getHandle().connection == null) return;
+
+        this.getHandle().connection.sendPacket(
+            new net.minecraft.network.protocol.game.ClientboundSetCameraPacket(
+                target == null ? this.getHandle() :  ((CraftEntity) target).getHandle()
+            )
+        );
+    }
+
     @Override
     public WorldBorder getWorldBorder() {
         return this.clientWorldBorder;
